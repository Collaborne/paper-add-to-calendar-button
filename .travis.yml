dist: trusty
group: beta
language: node_js
node_js:
- node
cache:
  directories:
  - node_modules
before_install:
- if [ -d node_modules ] && [ x$(cat node_modules/.last-node-version 2>/dev/null) != x$(node -e 'console.log(process.version)') ]; then npm rebuild --update-binary && node -e 'console.log(process.version)' > node_modules/.last-node-version; fi
deploy:
  skip_cleanup: true
  provider: npm
  email: npm@collaborne.com
  api_key:
    secure: "ZmKe0rOid9Zk+RwWUDnlQfJSHwm9NiDAQJTWcGHi4YDRdhexeESopBHBsxpiM0p32FmUjY9RuMn5rsRAUi82NxieLbUGF+/cCXjU7FeOWFce+AZrK4OGSrsAsizsn/jQqQzLylrDQerSsTWOW3p08RqrTKv0R19QEGFN3Ag3otBSk1sQ2RpMgcYpssJN7cx4B2tErfKg8tYEqdw59dvrRKe2Inm9XeetWYm116M/uyA84FPuHdJUTYGW9rR7zPrmmZOhVlAXuCqojYiVGmksedv2BWx0opxzl3XUlJcarMSHR9Ux3WMvmINAxa3irwB6qe3JtUEgdcR10isF7JQCiJyw0MSjPGoECHlF1wkh7U4qcMjX6TIWog1UjgTYQEahPD5kGJ5ovGq5+ub9T6mM9VQMv+HxykYjefex1vh+hroFpTYDjM86SRpnJLF1xQHGoYoYSePbpFOc7Ow+j5myKlUC6scxcN4SuFdyi9ilF0Te/IJWdWu2QebYDq7yHkkXorrYOKNYCz5YZqHCzjJnzUJTMxNYDjsZezPAyGliiMsfNzCiK3+zhhd7ii23qwj4GwZPJLAaTMWbof5BjZIeplZD8LK8IivNBqZfXfzo2l3Tdnye9U8Hvk+6hSAWGNcj7PUAQl1ZP9o2S4zIfcbmO01p7ncnAjIbXEvYfwSfgCM="
  on:
    tags: true
    condition: $(node -e 'console.log("v" + require("./package.json").version)') = ${TRAVIS_TAG}
