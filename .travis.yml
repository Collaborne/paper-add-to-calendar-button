dist: trusty
group: beta
language: node_js
node_js:
- node
cache:
  directories:
  - node_modules
before_install:
- if [ -d node_modules ] && [ x$(cat node_modules/.last-node-version 2>/dev/null) != x$(node -e 'console.log(process.version)') ]; then npm rebuild --update-binary && node -e 'console.log(process.version)' > node_modules/.last-node-version; fi
deploy:
  skip_cleanup: true
  provider: npm
  email: npm@collaborne.com
  api_key:
    secure: "5mSjE0ZPrIJrNvq1iO6lV142eq+y9YAwqWqRwEjsPFTIq7Q+DEP1DBr2FtasMM+HJwdPI+5LtZZ9IXY8+zUGSIFqsxEHztRCVuHwkNgWV5+upBf0SP8VWJLSek0s4DqXTkjKkF7ydceBaJQehAUsC73ZeyJBEwUk96Vmhn6YzLaU4Wrrm7njccpB6R3hXRt3l3mSUd314MBywk8kZf2UdH+FnahgDNRw7HFJrost6sXzshM6cEQhvNioFw3+hdudCwgkUbbj8Cr+ERTvz4fZHbNr+uJHLc1cKrhL+Xeqex4OQvYzlPRl/kNCnahvaXeKAbWh0hG0Tgd3KYYMSPUxCohw+bREhKVNR4qW8irwfFaXIWhGDIdYdnimNDlPzYNZkkppsmwTQfC07Rdwn/ko4uBdeqP8Pj2UO06/seaed1MuwoHN8GK7tU9oT0c6TaMT/eROJ0/ewTr2USZQ7ozYH+5xMp1s4x4x0Iq6VKs46SWbfnWQbp4c+ByN3tsaVJmbvYvoqIRLuGiksPf6Dx53Prt+HMk6JaB7mnZ7Lze1qE58nh+H4LTIX684hAwXqa+eV6fq2ok9+EJEBiI+HTiM3hRIqjiEe2REwDQoiuAvVA7o3U6SJJbHt0hprEyPRrrfi5Heia81oauUV+Ug1QJoPlT0lmspJSuQmrPJaU6a6U0="
  on:
    tags: true
    condition: $(node -e 'console.log("v" + require("./package.json").version)') = ${TRAVIS_TAG}
