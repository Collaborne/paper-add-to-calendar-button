dist: trusty
group: beta
language: node_js
node_js:
- node
cache:
  directories:
  - node_modules
before_install:
- if [ -d node_modules ] && [ x$(cat node_modules/.last-node-version 2>/dev/null) != x$(node -e 'console.log(process.version)') ]; then npm rebuild --update-binary && node -e 'console.log(process.version)' > node_modules/.last-node-version; fi
deploy:
  skip_cleanup: true
  provider: npm
  email: npm@collaborne.com
  api_key:
    secure: "0dQhCMC0iKbamJVkI/nIz/RdaVw+UMUA26PLr31vh2s6lvGt1c5EhvCzYQczV7AZHKnCYIZFSXYc6Dkv9WThmnt5e16JWsY9HJsr+Se2YQDNrY9wTkMBCAmIRcPz0H7AodLST6MsQsqnsnXRYXW6mQ7OD9KjFe5vLiNdKG5vycb9KTPh69w2zl7+YZ8xVwpRRnVs0Pe3hTyfqR+C1l7s4W8Iq4GNCbZOB4r9KEp+1GkestDjbTKRMyS8hZo4VdxzbXBXdb7G/2t62JPyXL7KiXSmGQxzn6A7jY2gYRbYxSq2dmIiL7PhFaTLqxbkR6fsHW0BcH1xuJVMB3VC4/SlYNfQy+XbJF/f/rqa/Mus2DhlCAhVUtsJWzxS6sLHL3f+pD0e6SPjygoygyYDQWo4h04xhZUf6MDuRLtPxE5idQOyGp/NeG5/+rKWRfV/HB440qFMCzUDajY9pZcNKDzh3kyjuP1TQNBY/n3AvJyEL8wCvy2YDFPXWKagmuMJ5IkoWuQvMCimzjn/ZplkncOMcTJuW6oYYxpHSS7HRkSGF29IvkAngr8N52jV7VrCbywv1EYfjHNgZJTPL/nDWlpPNj2c2xzTrezvB1D2q6epSyBO9s5g2n8A+qq2P+QbauogrB0Vvo9ZHsWRiSwS0sVpeJOST5yF1U9rKBzi/Gep2CA="
  on:
    tags: true
    condition: $(node -e 'console.log("v" + require("./package.json").version)') = ${TRAVIS_TAG}
